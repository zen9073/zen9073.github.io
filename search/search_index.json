{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"blackbox/","title":"Blackbox prober exporter","text":"<pre><code>scrape_configs:\n  - job_name: \"blackbox\"\n    metrics_path: /probe\n    params:\n      module: [http_2xx] # Look for a HTTP 200 response.\n    static_configs:\n      - targets:\n          - http://prometheus.io # Target to probe with http.\n          - https://prometheus.io # Target to probe with https.\n          - http://example.com:8080 # Target to probe with http on port 8080.\n    relabel_configs:\n      - source_labels: [__address__]\n        target_label: __param_target\n      - source_labels: [__param_target]\n        target_label: instance\n      - target_label: __address__\n        replacement: 127.0.0.1:9115 # The blackbox exporter's real hostname:port.\n</code></pre> <p>\u9996\u5148\u83b7\u53d6 targets \u5b9e\u4f8b\u7684 address \u503c\u5199\u8fdb param_target\uff0cparam_name \u5f62\u5f0f\u7684\u6807\u7b7e\u91cc\u7684 name \u548c\u5b83\u7684\u503c\u4f1a\u88ab\u6dfb\u52a0\u5230\u53d1\u9001\u5230 blackbox http \u7684 header \u7684 params \u5f53\u4f5c\u952e\u503c\u3002</p> <p>\u7136\u540e\u83b7\u53d6 param_target \u7684\u503c\uff0c\u5e76\u8986\u5199\u5230 instance \u6807\u7b7e\u4e2d\u3002</p> <p>\u6700\u540e\u8986\u5199 Target \u5b9e\u4f8b\u7684 address \u6807\u7b7e\u503c\u4e3a BlockBox Exporter \u5b9e\u4f8b\u7684\u8bbf\u95ee\u5730\u5740\uff0c\u5411 127.0.0.1:9115 \u53d1\u9001\u8bf7\u6c42\u83b7\u53d6\u5b9e\u4f8b\u7684 metrics \u4fe1\u606f\u3002</p>"},{"location":"chrome/","title":"Chrome","text":""},{"location":"chrome/#_1","title":"\u4e0b\u8f7d","text":"<p>\u5728\u5feb\u6377\u94fe\u63a5\u9875\u9762 Google Chrome \u5305\u542b\u4e86\u5404\u5e73\u53f0\u7684\u4e0b\u8f7d\u5730\u5740\u3002</p> <pre><code>wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb\nsudo apt install ./google-chrome-stable_current_amd64.deb\nrm google-chrome-stable_current_amd64.deb\n</code></pre>"},{"location":"chrome/#_2","title":"\u5fc5\u88c5\u63d2\u4ef6","text":"<ol> <li>\u53bb\u9664\u70e6\u4eba\u7684\u5e7f\u544a Adblock Plus</li> <li>\u65b9\u4fbf\u7684\u5bc6\u7801\u7ba1\u5bb6 LastPass</li> <li>\u56fd\u5185\u7684\u7f51\u7edc\u5fc5\u5907 Proxy SwitchyOmega</li> </ol>"},{"location":"chrome/#google-search","title":"Google Search","text":""},{"location":"chrome/#google-hk","title":"\u8ba9 Google \u641c\u7d22\u4e0d\u8df3\u8f6c\u5230 .hk \u9875\u9762","text":"<p>\u5728\u5730\u5740\u680f\u8f93\u5165 <code>https://www.google.com/ncr</code> \u7136\u540e\u53ea\u8981\u4e0d\u6e05\u7a7a cookie \u5c31\u4f1a\u4e00\u76f4\u6709\u6548\u3002</p>"},{"location":"chrome/#wwwgooglecom","title":"\u4f7f\u7528 <code>www.google.com</code> \u641c\u7d22","text":"<p>\u6253\u5f00 <code>chrome://settings/searchEngines</code> \u9875\u9762\uff0c\u5148\u9009\u62e9\u4f7f\u7528\u5176\u4ed6\uff0c\u7136\u540e\u5220\u9664 <code>Google</code>,\u518d\u65b0\u5efa <code>Google Search Engine</code> \u5185\u5bb9\u5c31\u4f7f\u7528\u4e0b\u9762\u7684\u94fe\u63a5\u586b\u5145\u3002</p> <p>\u82f1\u6587\u641c\u7d22 <code>https://www.google.com/search?hl=en&amp;q=%s</code></p> <p>\u4e2d\u6587\u641c\u7d22 <code>https://www.google.com/search?hl=zh-CN&amp;q=%s</code></p>"},{"location":"docker/","title":"Docker","text":""},{"location":"docker/#_1","title":"\u5b89\u88c5","text":"<p>\u901a\u8fc7\u56fd\u5185\u955c\u50cf\u624b\u52a8\u5b89\u88c5</p> <ul> <li>https://mirrors.tuna.tsinghua.edu.cn/help/docker-ce/</li> </ul> <p>\u6216\u8005\u4f7f\u7528\u811a\u672c\u81ea\u52a8\u5b8c\u6210</p> <pre><code>curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun\n</code></pre> <p>\u624b\u52a8\u901a\u8fc7\u534e\u4e3a\u955c\u50cf\u5b89\u88c5</p> <pre><code>sudo apt install -y curl gnupg2 ca-certificates lsb-release ubuntu-keyring\n\ncurl https://mirrors.huaweicloud.com/docker-ce/linux/ubuntu/gpg | gpg --dearmor \\\n    | sudo tee /etc/apt/trusted.gpg.d/docker-ce.gpg &gt;/dev/null\n\nsudo add-apt-repository \"deb [arch=amd64] https://mirrors.huaweicloud.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable\"\n\nsudo apt install -y docker-ce python3-docker\n\nsudo apt-mark hold docker-buildx-plugin docker-ce docker-ce-cli docker-ce-rootless-extras docker-compose-plugin python3-docker\n</code></pre>"},{"location":"docker/#_2","title":"\u53c2\u6570","text":"<pre><code>cat &lt;&lt; EOF &gt; /etc/docker/daemon.json\n{\n  \"features\": {\n    \"buildkit\": true\n  },\n  \"exec-opts\": [\n    \"native.cgroupdriver=systemd\"\n  ],\n  \"log-driver\": \"json-file\",\n  \"log-level\": \"info\",\n  \"log-opts\": {\n    \"max-size\": \"30m\",\n    \"max-file\": \"2\"\n  }\n}\nEOF\n</code></pre>"},{"location":"docker/#_3","title":"\u6743\u9650","text":"<p>\u684c\u9762\u73af\u5883\u8fd8\u9700\u8981\u6dfb\u52a0\u7528\u6237\u5230 docker \u7ec4</p> <pre><code>usermod -aG docker zen\n</code></pre>"},{"location":"iptables/","title":"Iptables","text":""},{"location":"iptables/#_1","title":"\u9884\u8bbe\u914d\u7f6e","text":"<pre><code>cat &lt;&lt;EOF &gt;/etc/iptables.rulesets\n*filter\n\n#  Allow all loopback (lo0) traffic and drop all traffic to 127/8 that doesn't use lo0\n-A INPUT -i lo -j ACCEPT\n-A INPUT -d 127.0.0.0/8 -j REJECT\n\n#  Accept all established inbound connections\n-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n\n#  Allow all outbound traffic - you can modify this to only allow certain traffic\n-A OUTPUT -j ACCEPT\n\n#  Allow HTTP and HTTPS connections from anywhere (the normal ports for websites and SSL).\n-A INPUT -p tcp --dport 80 -j ACCEPT\n-A INPUT -p tcp --dport 443 -j ACCEPT\n\n#  Allow SSH connections\n#\n#  The -dport number should be the same port number you set in sshd_config\n#\n-A INPUT -p tcp -m state --state NEW --dport 22 -j ACCEPT\n\n#  Allow ping\n-A INPUT -p icmp -j ACCEPT\n\n#  Log iptables denied calls\n-A INPUT -m limit --limit 5/min -j LOG --log-prefix \"iptables denied: \" --log-level 7\n\n#  Drop all other inbound - default deny unless explicitly allowed policy\n-A INPUT -j DROP\n\nCOMMIT\nEOF\n</code></pre>"},{"location":"iptables/#_2","title":"\u542f\u52a8\u540e\u81ea\u52a8\u6062\u590d","text":"<p>\u670d\u52a1\u811a\u672c</p> <pre><code>cat &lt;&lt;EOF &gt;/lib/systemd/system/boot-restore-iptables.service\n[Unit]\nDescription = Apply iptables rules\n\n# \u8bbe\u7f6e\u5728 ssh \u4e4b\u540e\u542f\u52a8\uff0c\n# \u56e0\u4e3a\u5728\u7cfb\u7edf\u542f\u52a8\u5230\u4e00\u5b9a\u9636\u6bb5 iptables-restore \u624d\u80fd\u6709\u6548\uff0c\n# \u7136\u800c\u5177\u4f53\u7684\u4fe1\u606f\u6682\u65f6\u4e0d\u786e\u5b9a\uff0c\nAfter = ssh.service\n\n[Service]\nType=oneshot\nExecStart=/bin/sh -c 'iptables-restore &lt; /etc/iptables.rulesets'\nRemainAfterExit=yes\n\n[Install]\nWantedBy=default.target\nEOF\n</code></pre> <p>\u542f\u7528\u670d\u52a1</p> <pre><code>systemctl enable boot-restore-iptables.service\n</code></pre>"},{"location":"keepass/","title":"KeePass","text":""},{"location":"keepass/#_1","title":"\u5b89\u88c5","text":"<pre><code>sudo apt install -y keepass2\nsudo apt install -y libcanberra-gtk-module\n</code></pre>"},{"location":"keepass/#_2","title":"\u4e2d\u6587","text":"<ul> <li>\u4e0b\u8f7d\u8bed\u8a00\u5305</li> </ul> <p>https://downloads.sourceforge.net/keepass/KeePass-2.44-Chinese_Simplified.zip</p> <ul> <li>\u8bbe\u7f6e\u5b57\u4f53</li> </ul> <p>\u5728 KeePass \u4e2d\uff0c\u5355\u51fb 'Tools' \u2192 'Options' \u2192 'Interface'\uff0c\u62c9\u5230\u6700\u4e0b\uff0c\u53bb\u6389\u52fe\u9009 'Force usage of system font(Unix only)'\uff0c\u7136\u540e\u5355\u51fb 'SelectListFont'\uff0c\u9009\u62e9 'Noto Sans CJK SC' \u5b57\u4f53 \u3002</p> <ul> <li>\u8bbe\u7f6e\u8bed\u8a00</li> </ul> <p>\u5728 KeePass \u4e2d\uff0c\u5355\u51fb 'View' \u2192 'Change Language' \u2192 'Open Folder' \u6309\u94ae\uff0c\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a\u76ee\u5f55\uff0c\u4e0b\u8f7d\u8bed\u8a00\u6587\u4ef6\u7136\u540e\u89e3\u538b\u5230\u8fd9\u4e2a\u76ee\u5f55\u3002</p> <pre><code>sudo mkdir -p /usr/lib/keepass2/Languages\nsudo mv Chinese_Simplified.lngx /usr/lib/keepass2/Languages\n</code></pre> <p>\u91cd\u65b0\u6253\u5f00 KeePass \u518d\u5355\u51fb 'View' \u2192 'Change Language'\uff0c\u9009\u62e9\u4e2d\u6587\u3002</p> <p>\u7136\u800c\u5e76\u4e0d\u80fd\u5b8c\u5168\u663e\u793a\u4e2d\u6587\uff0c\u8fd8\u662f\u6709\u90e8\u5206\u4e2d\u6587\u4f1a\u88ab\u663e\u793a\u6210\u6846\u6846\u3002</p>"},{"location":"keepass/#k2","title":"k2","text":"<p>\u8981\u5b8c\u6574\u663e\u793a\u4e2d\u6587\u9700\u8981\u8bbe\u7f6e <code>zh_CN.UTF-8</code> \u73af\u5883\u3002\u4f8b\u5982\uff0c</p> <pre><code>export LC_ALL=zh_CN.UTF-8 &amp;&amp; keepass2\n</code></pre> <p>\u6216\u8005\u76f4\u63a5\u518d .bashrc \u4f7f\u7528 alias\u3002</p> <pre><code>alias k2='export LC_ALL=zh_CN.UTF-8 &amp;&amp; keepass2'\n</code></pre>"},{"location":"links/","title":"Links","text":""},{"location":"links/#_1","title":"\u5f00\u6e90\u955c\u50cf\u7ad9","text":"<ul> <li>https://mirrors.tuna.tsinghua.edu.cn/</li> <li>https://mirrors.cloud.tencent.com/</li> <li>https://mirrors.huaweicloud.com/</li> <li>https://developer.aliyun.com/mirror/</li> </ul>"},{"location":"links/#google-chrome","title":"Google Chrome","text":"<p>Mac OS</p> <ul> <li>https://dl.google.com/chrome/mac/stable/GGRO/googlechrome.dmg</li> </ul> <p>Debian/Ubuntu</p> <ul> <li>https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb</li> </ul> <p>Centos/Fedora</p> <ul> <li>https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm</li> </ul> <p>Windows 32-bit</p> <ul> <li>https://dl.google.com/dl/chrome/install/googlechromestandaloneenterprise.msi</li> </ul> <p>Windows 64-bit</p> <ul> <li>https://dl.google.com/dl/chrome/install/googlechromestandaloneenterprise64.msi</li> </ul>"},{"location":"links/#windows","title":"Windows \u56db\u5927\u7cfb\u7edf\u5de5\u5177","text":"<ul> <li>http://www.piriform.com/CCleaner/download/portable</li> <li>https://download.ccleaner.com/portable/ccsetup639.zip</li> <li>https://download.ccleaner.com/ccsetup639.exe</li> <li>https://download.ccleaner.com/dfsetup222.exe</li> <li>https://download.ccleaner.com/rcsetup154.exe</li> <li>https://download.ccleaner.com/spsetup133.exe</li> </ul>"},{"location":"links/#directx","title":"DirectX","text":"<ul> <li>https://download.microsoft.com/download/8/4/A/84A35BF1-DAFE-4AE8-82AF-AD2AE20B6B14/directx_Jun2010_redist.exe</li> </ul>"},{"location":"links/#winara","title":"WinARA","text":"<ul> <li>https://www.win-rar.com/fileadmin/winrar-versions/sc20181016/wrr/wrar561sc.exe</li> <li>https://www.win-rar.com/fileadmin/winrar-versions/sc20181016/wrr/winrar-x64-561sc.exe</li> </ul>"},{"location":"links/#adobe-reader-11","title":"Adobe Reader 11","text":"<ul> <li>http://ardownload.adobe.com/pub/adobe/reader/win/11.x/11.0.00/zh_CN/AdbeRdr11000_zh_CN.exe</li> </ul>"},{"location":"linux/","title":"Linux","text":""},{"location":"linux/#windwos","title":"\u8fdc\u7a0b windwos \u7cfb\u7edf","text":"<pre><code>sudo apt install remmina\n</code></pre>"},{"location":"linux/#rammina","title":"\u67e5\u770b rammina \u4fdd\u5b58\u7684\u5bc6\u7801","text":"<pre><code>apt install seahorse\n</code></pre>"},{"location":"linux/#mkisofs","title":"mkisofs","text":"<pre><code>mkisofs -r -R -J -l -iso-level 3 xx.iso xx\n</code></pre>"},{"location":"linux/#jq","title":"jq","text":"<pre><code>cat list | jq ' [ . | to_entries[] | .key=.value.label | .value = .value.location ] | from_entries'\n</code></pre>"},{"location":"linux/#ssh_config","title":"ssh_config","text":"<pre><code>Host    *\n    ServerAliveInterval 10\n    ControlPersist      10h\n    ControlMaster       auto\n    ControlPath         ~/.ssh/%h-%p-%r\n\nHost    100\n    Port 22\n    User root\n    Hostname    192.168.1.100\n    IdentityFile ~/.ssh/id_rsa\n\n\nHost    git.9073.me\n    HostName        git.9073.me\n    IdentityFile    ~/.ssh/git.key\n    IdentitiesOnly  Yes\n</code></pre>"},{"location":"linux/#wget","title":"wget \u81ea\u52a8\u4fee\u6b63\u6587\u4ef6\u540d","text":"<p>wget --content-disposition</p>"},{"location":"linux/#chrome","title":"chrome \u9996\u9875\u88ab\u52ab\u6301","text":"<p>chrome: \u7528\u8bb0\u4e8b\u672c\u6253\u5f00 C:\\Users\\zen\\AppData\\Local\\Google\\Chrome\\User Data\\Default\\Secure Preferences</p>"},{"location":"linux/#nemo","title":"nemo","text":"<pre><code>#!/bin/bash\n\nnew() {\n    xdg-mime default nemo.desktop inode/directory application/x-gnome-saved-search\n    gsettings set org.gnome.desktop.background show-desktop-icons false\n    gsettings set org.nemo.desktop show-desktop-icons true\n}\n\nold() {\n    gsettings set org.gnome.desktop.background show-desktop-icons true\n    gsettings set org.nemo.desktop show-desktop-icons false\n    xdg-mime default nautilus.desktop inode/directory application/x-gnome-saved-search\n}\n\n#new\n#old\n</code></pre>"},{"location":"linux/#cloud-init","title":"cloud init","text":"<pre><code>#cloud-config\n# vim: syntax=yaml\n\nuser: root\ndisable_root: False\npassword: rootroot\nchpasswd:\n  expire: False\napt:\n  primary:\n    - arches: [amd64]\n      uri: http://repo.huaweicloud.com/ubuntu/\n  security:\n    - uri: http://repo.huaweicloud.com/ubuntu/\n      arches: [amd64]\npackage_update: false\npackage_upgrade: false\nssh_authorized_keys:\n  - ssh-rsa ......\n  - ssh-rsa ......\n</code></pre> <pre><code>cloud-localds cloud-init.iso cloud-init.yaml\n</code></pre>"},{"location":"linux/#realvnc","title":"realvnc","text":"<pre><code>cmVhbHZuYyA1LnggNi54IAoKQlEyNEctUERYRTQtS0tLUlMtV0JIWkUtRjVSQ0EKQlEyNEctUERYRTQtS0tLUlMtV0JIWkUtRjVSQ0EKOFpFWkgtUVBBTk0tTlgzQTUtOEM0VFMtOEI5N0EKN0FCNFgtM1lOWEYtQzVNUlItNTlESkctN0hHTkEKVVBMOFAtQ04yTVQtODVFUkEtTjNFM0ItR0VSREEKSFJCUkgtM0JONTItWjhFQ0gtQ0o3QjctTU5YM0EKCg==\n</code></pre>"},{"location":"nginx/","title":"Nginx","text":""},{"location":"nginx/#_1","title":"\u5b89\u88c5","text":"<p>\u57fa\u4e8e\u6211\u5e38\u7528\u7684 ubuntu \u6216\u8005 debian \u8fd9\u4e24\u4e2a Linux \u53d1\u884c\u7248\u5b89\u88c5 mainline \u7248\u7b80\u7565\u8fc7\u7a0b\u3002</p> <pre><code>distribution=$(lsb_release -si)\ncodename=$(lsb_release -sc)\n\nsudo apt install -y --no-install-recommends curl gnupg2 ca-certificates lsb-release\n\necho \"deb [arch=amd64] http://nginx.org/packages/mainline/${distribution,,} ${codename,,} nginx\" \\\n    | sudo tee /etc/apt/sources.list.d/nginx.list\n\ncurl -fsSL https://nginx.org/keys/nginx_signing.key \\\n    | sudo apt-key add -\n\nsudo apt update &amp;&amp; sudo apt install nginx\n\nsudo usermod -aG www-data nginx\n</code></pre>"},{"location":"nginx/#_2","title":"\u4e3b\u914d\u7f6e","text":"<p>\u6839\u636e\u957f\u671f\u4f7f\u7528\u6700\u6700\u7ec8\u7248\u914d\u7f6e\u3002</p> <pre><code># config for nginx\nuser nginx;\nworker_processes auto;\nworker_rlimit_nofile 65535;\n\nerror_log  /var/log/nginx/error.log;\npid        /var/run/nginx.pid;\n\nevents {\n    worker_connections  65535;\n}\n\nstream {\n    resolver 8.8.8.8;\n    log_format main '$remote_addr [$time_local] '\n                    '$protocol [$ssl_preread_protocol $ssl_preread_server_name] $status $bytes_sent $bytes_received '\n                    '$session_time \"$upstream_addr\" '\n                    '\"$upstream_bytes_sent\" \"$upstream_bytes_received\" \"$upstream_connect_time\"';\n    access_log  /var/log/nginx/stream.access.log  main;\n    include /etc/nginx/stream/*.conf;\n}\n\n\nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n\n    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile           on;\n    tcp_nopush         on;\n    tcp_nodelay        on;\n\n    keepalive_timeout  180;\n\n    gzip               on;\n    gzip_vary          on;\n    gzip_comp_level    6;\n    gzip_buffers       16 8k;\n    gzip_min_length    1000;\n    gzip_proxied       any;\n    gzip_disable       \"msie6\";\n    gzip_http_version  1.0;\n    gzip_types         text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript application/javascript;\n\n    server_names_hash_bucket_size 64;\n    server_tokens off;\n\n    include /etc/nginx/conf.d/*.conf;\n}\n</code></pre>"},{"location":"nginx/#ssl","title":"SSL \u914d\u7f6e","text":"<p>\u5f53\u524d\u4f7f\u7528\u7684\u6bd4\u8f83\u5b89\u5168\u7684 SSL \u914d\u7f6e\u3002</p> <pre><code># ssl-options.conf\n\nssl_protocols TLSv1.2 TLSv1.3; # Requires nginx &gt;= 1.13.0 else use TLSv1.2\nssl_prefer_server_ciphers on;\n#ssl_dhparam /etc/nginx/dhparam.pem; # openssl dhparam -out /etc/nginx/dhparam.pem 4096\nssl_ciphers EECDH+AESGCM:EDH+AESGCM;\nssl_ecdh_curve secp384r1; # Requires nginx &gt;= 1.1.0\nssl_session_timeout  10m;\nssl_session_cache shared:SSL:10m;\nssl_session_tickets off; # Requires nginx &gt;= 1.5.9\nssl_stapling on; # Requires nginx &gt;= 1.3.7\nssl_stapling_verify on; # Requires nginx =&gt; 1.3.7\nresolver 8.8.8.8 1.1.1.1 valid=300s;\nresolver_timeout 5s;\nadd_header Strict-Transport-Security \"max-age=63072000; includeSubDomains; preload\";\nadd_header X-Frame-Options DENY;\nadd_header X-Content-Type-Options nosniff;\nadd_header X-XSS-Protection \"1; mode=block\";\n</code></pre>"},{"location":"nginx/#_3","title":"\u8bc1\u4e66\u914d\u7f6e","text":"<pre><code># ssl-certificate.conf\n\nssl_certificate     /etc/nginx/ssl/server.crt;\nssl_certificate_key /etc/nginx/ssl/server.key;\n</code></pre>"},{"location":"nginx/#https","title":"https","text":"<pre><code>server {\n    listen      80;\n    listen      443 ssl http2;\n    server_name wiki.9073.me;\n    charset     utf-8;\n\n    # force https-redirects\n    if ($scheme = http) {\n        return 301 https://$server_name$request_uri;\n    }\n\n    include     ssl-certificate.conf;\n    include     ssl-options.conf;\n\n    access_log  /var/log/nginx/wiki.access.log main;\n    error_log   /var/log/nginx/wiki.error.log;\n\n    root /var/www/wiki;\n\n    location / {\n        index index.html;\n    }\n\n}\n</code></pre>"},{"location":"nginx/#_4","title":"\u76ee\u5f55\u6743\u9650","text":"<p>\u8bbe\u7f6e /var/www \u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u6743\u9650</p> <pre><code>mkdir -p /var/www\nchown -R nginx:www-data /var/www\nchmod 755 /var/www\nfind /var/www -type d -exec chmod 755 {} +\nfind /var/www -type f -exec chmod 644 {} +\n</code></pre>"},{"location":"nginx/#robotstxt","title":"robots.txt","text":"<p>\u5982\u679c\u4e0d\u5e0c\u671b\u88ab\u7d22\u5f15\uff0c\u8fd8\u53ef\u4ee5\u8bbe\u7f6e robots.txt\uff0c\u544a\u8bc9\u722c\u866b\u4e0d\u8981\u6293\u53d6\u3002</p> <pre><code># robots.txt generated at http://portal.qiniu.com\nUser-agent: Baiduspider\nDisallow: /\nUser-agent: Sosospider\nDisallow: /\nUser-agent: sogou spider\nDisallow: /\nUser-agent: YodaoBot\nDisallow: /\nUser-agent: Googlebot\nDisallow: /\nUser-agent: Bingbot\nDisallow: /\nUser-agent: Slurp\nDisallow: /\nUser-agent: MSNBot\nDisallow: /\nUser-agent: googlebot-image\nDisallow: /\nUser-agent: googlebot-mobile\nDisallow: /\nUser-agent: yahoo-blogs/v3.9\nDisallow: /\nUser-agent: psbot\nDisallow: /\nUser-agent: *\nDisallow: /\n</code></pre>"},{"location":"nginx/#basic","title":"basic \u9a8c\u8bc1","text":"<pre><code>sudo apt install -y apache2-utils\nhtpasswd -bc passwd user pass\n</code></pre> <pre><code>    auth_basic          \"passwd\";\n    auth_basic_user_file passwd;\n</code></pre>"},{"location":"nginx/#_5","title":"\u5f00\u542f\u7d22\u5f15","text":"<pre><code>location / {\n    autoindex on;\n    autoindex_localtime on;\n    autoindex_exact_size off;\n}\n</code></pre>"},{"location":"ngrok/","title":"Ngrok","text":""},{"location":"ngrok/#_1","title":"\u7f16\u8bd1","text":"<p>\u4e0b\u8f7d\u7f16\u8bd1\u73af\u5883</p> <pre><code>apt-get install build-essential golang git\n</code></pre> <p>\u83b7\u53d6\u4ee3\u7801</p> <pre><code>git clone https://github.com/inconshreveable/ngrok.git ngrok\ncd ngrok\n</code></pre> <p>\u66ff\u6362\u4e3a\u81ea\u7b7e\u540d\u8bc1\u4e66</p> <pre><code>cp ca.crt assets/client/tls/ngrokroot.crt\ncp 9073.me.crt assets/server/tls/snakeoil.crt\ncp 9073.me.key assets/server/tls/snakeoil.key\n</code></pre> <p>\u7f16\u8bd1 64 \u4f4d Linux \u670d\u52a1\u5668\u7aef</p> <pre><code>GOOS=linux GOARCH=amd64  make release-server\n</code></pre> <p>\u7f16\u8bd1\u5404\u7cfb\u7edf\u73af\u5883\u5ba2\u6237\u7aef</p> <pre><code>GOOS=darwin GOARCH=amd64  make release-client\nGOOS=windows GOARCH=amd64 make release-client\nGOOS=windows GOARCH=386 make release-client\nGOOS=linux GOARCH=amd64  make release-client\nGOOS=linux GOARCH=386  make release-client\n</code></pre>"},{"location":"ngrok/#_2","title":"\u914d\u7f6e","text":"<p>\u5c06 <code>9073.me</code> \u548c <code>t[0-9]+.9073.me</code> \u57df\u540d\u6307\u5411\u670d\u52a1\u5668 IP\uff0c\u7136\u540e\u914d\u7f6e nginx\u3002</p> <ul> <li>\u5bf9\u5916\u7f51\u5361\uff1a<code>192.168.1.10</code></li> <li>\u5bf9\u5185\u7f51\u5361\uff1a<code>192.168.1.120</code></li> </ul> <pre><code>server {\n    listen      192.168.1.10:443 ssl;\n    server_name ~^t[0-9]+\\.9073\\.me$;\n    charset     utf-8;\n\n    ssl_certificate     /etc/ssl/9073/9073.me.crt;\n    ssl_certificate_key /etc/ssl/9073/9073.me.key;\n\n    location / {\n        proxy_pass https://192.168.1.120:443;\n    }\n}\n</code></pre> <p>\u53ef\u4ee5\u786e\u4fdd [t0-t20].9073.me \u57df\u540d\u53ef\u4ee5\u88ab nginx \u89e3\u6790\uff0c\u76f4\u63a5\u53d1\u9001\u5230 ngrok \u670d\u52a1\u3002</p> <p>\u5c06 ngrok \u5ba2\u6237\u7aef\u590d\u5236\u5230 bin \u76ee\u5f55\u7136\u540e\u6dfb\u52a0\u4ee5\u4e0b\u5ba2\u6237\u7aef\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9</p>"},{"location":"ngrok/#ngrok-client","title":"ngrok client","text":"<pre><code># ~/.ngrok\nserver_addr: 9073.me:4443\ntrust_host_root_certs: false\n\ntunnels:\n  web:\n    subdomain: zen\n    proto:\n      https: 8888\n      http: 8888\n  ssh:\n    remote_port: 5922\n    proto:\n      tcp: 22\n  vnc:\n    remote_port: 5900\n    proto:\n      tcp: 5900\n</code></pre>"},{"location":"ngrok/#systemd","title":"systemd","text":"<pre><code>#  /etc/systemd/system/ngrokd.service\n[Unit]\nDescription=ngrokd\nWants=network.target\nAfter=syslog.target\n\n[Service]\n#Type=forking\nType=simple\n#User=nobody\nPIDFile=/var/run/ngrokd.pid\nExecStart=/opt/ngrok/ngrokd -domain=\"ngrok.9073.me\" -tunnelAddr=\"192.168.1.10:4443\" -httpsAddr=\"192.168.1.120:443\" -httpAddr=\"\" -tlsKey=\"/opt/ngrok/ngrok.key\" -tlsCrt=\"/opt/ngrok/ngrok.crt\"\nExecStop=/bin/kill -HUP $MAINPID\nPrivateTmp=True\n#Restart=always\nRestart=on-failure\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>"},{"location":"openssl/","title":"OpenSSL","text":""},{"location":"openssl/#_1","title":"\u751f\u6210\u8bc1\u4e66","text":""},{"location":"openssl/#rsa","title":"rsa \u8bc1\u4e66","text":"<p>\u540c\u65f6\u751f\u6210 crt \u548c key \u8bc1\u4e66</p> <pre><code>openssl req -new -x509 -nodes -days 3650 \\\n    -subj \"/CN=example.com.\" \\\n    -keyout server.key \\\n    -out server.crt\n</code></pre> <p>\u5206\u6b65\u751f\u6210 crt \u548c key \u8bc1\u4e66</p> <pre><code># key\nopenssl genrsa -out server.key\n\n# crt\nopenssl req -new -x509 -days 3650 \\\n    -key server.key \\\n    -out server.crt \\\n    -subj \"/CN=example.com.\"\n</code></pre>"},{"location":"openssl/#ec","title":"ec \u8bc1\u4e66","text":"<p>\u540c\u65f6\u751f\u6210 crt \u548c key \u8bc1\u4e66</p> <pre><code>openssl req -new -x509 -nodes -days 3650 \\\n    -newkey ec:&lt;(openssl ecparam -name prime256v1) \\\n    -subj \"/CN=example.com.\" \\\n    -keyout server.key \\\n    -out server.crt\n</code></pre> <p>\u5206\u6b65\u751f\u6210 crt \u548c key \u8bc1\u4e66</p> <pre><code># key\nopenssl ecparam -genkey -name secp256r1 | openssl ec -out server.key\n\n# crt\nopenssl req -new -x509 -days 3650 \\\n    -key server.key \\\n    -out server.crt \\\n    -subj \"/CN=example.com.\"\n</code></pre>"},{"location":"openssl/#_2","title":"\u7b2c\u4e09\u65b9\u7b7e\u53d1","text":"<p>\u751f\u6210 csr \u6587\u4ef6\u63d0\u4ea4\u7ed9\u7b2c\u4e09\u65b9\u7b7e\u53d1\u8bc1\u4e66\u3002</p> <pre><code>openssl req -new -key server.key -out server.csr -subj \"/CN=example.com.\"\n</code></pre>"},{"location":"openssl/#_3","title":"\u67e5\u770b\u548c\u6821\u9a8c","text":"<p>\u67e5\u770b\u8bc1\u4e66\u4fe1\u606f</p> <pre><code># rsa key\nopenssl rsa -noout -text -in server.key\n\n# ec key\nopenssl ec -noout -text -in server.key\n\n# csr\nopenssl req -noout -text -in server.csr\n\n# crt\nopenssl x509 -noout -text -in server.crt\n</code></pre> <p>\u6821\u9a8c\u8bc1\u4e66\u662f\u5426\u5339\u914d</p> <pre><code># rsa\ndiff -eq &lt;(openssl x509 -pubkey -noout -in server.crt) &lt;(openssl rsa -pubout -in server.key)\n# \u5355\u72ec\u8f93\u51fa\u4ee5\u4e0b\u4e3a\u5339\u914d\nwriting RSA key\n\n# ec\ndiff -eq &lt;(openssl x509 -pubkey -noout -in server.crt) &lt;(openssl ec -pubout -in server.key)\n# \u5355\u72ec\u8f93\u51fa\u4ee5\u4e0b\u4e3a\u5339\u914d\nread EC key\nwriting EC key\n\n# \u5305\u542b differ \u7684\u8f93\u51fa\u5219\u4e3a\u4e0d\u5339\u914d\n</code></pre>"},{"location":"openssl/#_4","title":"\u5176\u4ed6","text":"<p>\u5982\u679c\u8981\u4e3a\u591a\u4e2a\u57df\u540d\u6216\u8005 IP \u7b7e\u53d1\u8bc1\u4e66\uff0c \u5219\u9700\u8981\u5728 <code>-subj</code> \u4e4b\u5916\u4f7f\u7528 <code>-addext</code> \u518d\u6dfb\u52a0\u4fe1\u606f\uff0c\u591a\u6761\u4fe1\u606f\u4f7f\u7528\u9017\u53f7\u5206\u5272\u3002</p> <pre><code># \u57df\u540d\n-addext \"subjectAltName = DNS:www.example.com.\"\n\n# IP\n-addext \"subjectAltName = IP:1.2.3.4\"\n\n# \u591a\u6761\u4fe1\u606f\n-addext \"subjectAltName = DNS:www.example.com.,IP:1.2.3.4\"\n</code></pre>"},{"location":"postgres/","title":"PostgreSQL","text":""},{"location":"postgres/#_1","title":"\u5b89\u88c5","text":"<p>\u901a\u8fc7\u56fd\u5185\u955c\u50cf\u624b\u52a8\u5b89\u88c5</p> <ul> <li>https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/apt/</li> </ul> <pre><code>sudo apt install -y curl gnupg2 ca-certificates lsb-release ubuntu-keyring\n\ncurl https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/apt/ACCC4CF8.asc | gpg --dearmor \\\n    | sudo tee /etc/apt/trusted.gpg.d/postgresql.gpg &gt;/dev/null\n\nsudo add-apt-repository \"deb [arch=amd64] https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/apt $(lsb_release -cs)-pgdg main\"\n\nsudo apt update\n\nsudo apt install -y postgresql-client-18 postgresql-client-common libpq-dev\n</code></pre>"},{"location":"postgres/#_2","title":"\u8ba4\u8bc1","text":"<pre><code>touch ~/.pgpass\nchmod 0600 ~/.pgpass\necho \"127.0.0.1:5432:postgres:password\" &gt;&gt; ~/.pgpass\n</code></pre>"},{"location":"pve/","title":"Proxmox VE","text":""},{"location":"pve/#mirror","title":"Mirror","text":"<p>https://mirrors.tuna.tsinghua.edu.cn/proxmox/iso/</p> <p>https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cloud-images/noble/current/</p> <p>https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/stable-virtio/virtio-win.iso</p>"},{"location":"pve/#install","title":"Install","text":"<pre><code>sudo ddrescue -d -D -f proxmox-ve_9.0-1.iso /dev/sda\n# dd bs=1M conv=fdatasync if=./proxmox-ve_*.iso of=/dev/XYZ\n</code></pre> <p>\u81ea\u4e3b\u5206\u533a\uff1a</p> <ul> <li>swap 0</li> <li>maxvz 0</li> </ul>"},{"location":"pve/#pve-server","title":"PVE Server","text":"<pre><code># sources pve8\nsed -i 's|^deb http://deb.debian.org|deb https://mirrors.tuna.tsinghua.edu.cn|g' /etc/apt/sources.list\nsed -i 's|^deb http://ftp.debian.org|deb https://mirrors.tuna.tsinghua.edu.cn|g' /etc/apt/sources.list\nsed -i 's|^deb http://security.debian.org|deb https://mirrors.tuna.tsinghua.edu.cn|g' /etc/apt/sources.list\n\nrm /etc/apt/sources.list.d/ceph.list\nrm /etc/apt/sources.list.d/pve-enterprise.list\n\nsource /etc/os-release\necho &gt;&gt; /etc/apt/sources.list \"deb https://mirrors.tuna.tsinghua.edu.cn/proxmox/debian $VERSION_CODENAME pve-no-subscription\"\n\n# sources pve9\nsed -i 's|^URIs: http://deb.debian.org|URIs: https://mirrors.tuna.tsinghua.edu.cn|g' /etc/apt/sources.list.d/debian.sources\nsed -i 's|^URIs: http://ftp.debian.org|URIs: https://mirrors.tuna.tsinghua.edu.cn|g' /etc/apt/sources.list.d/debian.sources\nsed -i 's|^URIs: http://security.debian.org|URIs: https://mirrors.tuna.tsinghua.edu.cn|g' /etc/apt/sources.list.d/debian.sources\n\nrm /etc/apt/sources.list.d/ceph.sources\nrm /etc/apt/sources.list.d/pve-enterprise.sources\n\nsource /etc/os-release\ncat &lt;&lt; EOF &gt;/etc/apt/sources.list.d/proxmox.sources\nTypes: deb\nURIs: https://mirrors.tuna.tsinghua.edu.cn/proxmox/debian/pve\nSuites: $VERSION_CODENAME\nComponents: pve-no-subscription\nSigned-By: /usr/share/keyrings/proxmox-archive-keyring.gpg\nEOF\n\n# apt\napt update &amp;&amp; apt full-upgrade -y\napt install -y aria2 curl wget htop vim iftop iotop tree netcat-openbsd net-tools ifupdown2\napt install -y libgl1 libegl1\n\n# lvm\nlvremove /dev/pve/data\nlvextend -rl +100%FREE /dev/pve/root\nlvs\nvgs\npvs\ndf -hT\n\n# storage\ncat /etc/pve/storage.cfg\n\n# bash\nsed -i 's|# zh_CN.UTF-8 UTF-8|zh_CN.UTF-8 UTF-8|' /etc/locale.gen\nlocale-gen\n\necho &gt;&gt; ~/.bashrc \"export LC_ALL='en_US.UTF-8'\"\necho &gt;&gt; ~/.bashrc \"PS1='${debian_chroot:+($debian_chroot)}\\[\\033[01;32m\\]\\u@\\h\\[\\033[00m\\]:\\[\\033[01;34m\\]\\w\\[\\033[00m\\]\\$ '\"\n\n# vim\ncat &lt;&lt; EOF &gt;~/.vimrc\nsyntax on\nhi Comment ctermfg=6\nlet loaded_matchparen=1\nset encoding=utf-8\nset tabstop=4\nset softtabstop=4\nset expandtab\nset ruler\nset showcmd\nset showmatch\nset hlsearch\nset incsearch\nEOF\n</code></pre>"},{"location":"pve/#kvm-guest","title":"KVM Guest","text":""},{"location":"pve/#image","title":"Image","text":"<pre><code>aria2c -c -x 10 -s 10 https://mirrors.huaweicloud.com/ubuntu-cloud-images/noble/current/noble-server-cloudimg-amd64.img\nqemu-img convert -f qcow2 -O raw noble-server-cloudimg-amd64.img noble-server-cloudimg-amd64.raw\n\nmkdir -p /raw\n# fdisk -ul noble-server-cloudimg-amd64.raw\nmount -o loop,offset=$((2099200 * 512)) noble-server-cloudimg-amd64.raw /raw\n\nsed -i \"s@http://.*archive.ubuntu.com@http://mirrors.huaweicloud.com@g\"  /raw/etc/apt/sources.list.d/ubuntu.sources\nsed -i \"s@http://.*security.ubuntu.com@http://mirrors.huaweicloud.com@g\" /raw/etc/apt/sources.list.d/ubuntu.sources\n\nsed -i \"s@http://.*archive.ubuntu.com@http://mirrors.huaweicloud.com@g\"  /raw/etc/cloud/cloud.cfg\nsed -i \"s@http://.*security.ubuntu.com@http://mirrors.huaweicloud.com@g\" /raw/etc/cloud/cloud.cfg\n\numount /raw\n</code></pre>"},{"location":"pve/#create","title":"Create","text":"<pre><code># \u521b\u5efa\u865a\u62df\u673a\nqm create 101\n\n# \u5bfc\u5165 cloudimg \u6587\u4ef6\u4f5c\u4e3a\u786c\u76d8\nqm importdisk 101 noble-server-cloudimg-amd64.raw hd01 --format raw\nqm set 101 --scsihw virtio-scsi-single --scsi0 hd01:101/vm-101-disk-0.raw\n\n# \u8bbe\u7f6e\u542f\u52a8\u76d8\nqm set 101 --boot c --bootdisk scsi0\n\n# \u6dfb\u52a0 cloudinit \u8bbe\u7f6e\n# qm set 101 --ide2 hd01-lvm:cloudinit\nqm set 101 --ide2 hd01:cloudinit,format=raw\nqm set 101 --ciuser root\nqm set 101 --ciupgrade 0\nqm set 101 --sshkey ~/.ssh/authorized_keys\n\n# \u6dfb\u52a0\u7f51\u5361\u8bbe\u7f6e\nqm set 101 --net0 virtio,bridge=vmbr0\n# qm set 101 --ipconfig0 ip=dhcp\n# qm set 101 --ipconfig0 ip=192.168.1.11/24,gw=192.168.1.1\n\n# \u5176\u4ed6\u6742\u9879\u8bbe\u7f6e\nqm set 101 --serial0 socket --vga serial0\nqm set 101 --agent enabled=1,fstrim_cloned_disks=1,type=virtio\nqm set 101 --ostype l26\nqm set 101 --onboot 1\nqm set 101 --cpu host\nqm set 101 --name ubuntu\n\n# \u8bbe\u7f6e CPU \u5185\u5b58 \u786c\u76d8\nqm set 101 --cores 4\nqm set 101 --memory 2048\nqm resize 101 scsi0 10G\n</code></pre>"},{"location":"pve/#_1","title":"\u7cfb\u7edf\u521d\u59cb\u5316\u8bbe\u7f6e","text":"<pre><code>- name: PVE\n  hosts: all\n  gather_facts: false\n  vars:\n    basic_tools:\n      - apache2-utils\n      - apt-transport-https\n      - aria2\n      - bash-completion\n      - build-essential\n      - ca-certificates\n      - cron\n      - curl\n      - git\n      - htop\n      - iftop\n      - iptables\n      - jq\n      - man\n      - mosh\n      - mtr-tiny\n      - net-tools\n      - p7zip-full\n      - python3-dev\n      - python3-docker\n      - python3-passlib\n      - python3-pip\n      - p7zip-full\n      - qemu-guest-agent\n      - software-properties-common\n      - tree\n      - vim\n      - vnstat\n      - wget\n      - yq\n      - zip\n\n  tasks:\n    - name: \u8bbe\u7f6e\u4e3a\u4e2d\u56fd\u65f6\u533a\n      community.general.timezone:\n        name: \"Asia/Shanghai\"\n\n    - name: \u8bbe\u7f6e bash \u547d\u4ee4\u884c\u63d0\u793a\u7b26\u4e3a\u5f69\u8272\n      ansible.builtin.lineinfile:\n        path: /root/.bashrc\n        regexp: \"^#?force_color_prompt=yes\"\n        line: force_color_prompt=yes\n\n    - name: Vim \u7684\u81ea\u5b9a\u4e49\u914d\u7f6e | 1\n      ansible.builtin.copy:\n        content: |\n          \"syntax on\"\n        dest: /root/.vimrc\n        force: true\n        backup: true\n        mode: \"0644\"\n    - name: Vim \u7684\u81ea\u5b9a\u4e49\u914d\u7f6e | 2\n      ansible.builtin.lineinfile:\n        path: \"/root/.vimrc\"\n        line: \"{{ item }}\"\n      with_items:\n        - syntax on\n        - hi Comment ctermfg=6\n        - let loaded_matchparen=1\n        - set encoding=utf-8\n        - set tabstop=4\n        - set softtabstop=4\n        - set expandtab\n        - set ruler\n        - set showcmd\n        - set showmatch\n        - set hlsearch\n        - set incsearch\n\n    - name: \u542f\u7528 ipv4 \u7684\u8f6c\u53d1\uff0c\u5e76\u7981\u7528 ipv6 | 1\n      ansible.builtin.copy:\n        content: |\n          # Automatically generated by Ansible\\n\n        dest: /etc/sysctl.conf\n        force: true\n        backup: true\n        mode: \"0644\"\n    - name: \u542f\u7528 ipv4 \u7684\u8f6c\u53d1\uff0c\u5e76\u7981\u7528 ipv6 | 2\n      ansible.builtin.lineinfile:\n        path: \"/etc/sysctl.conf\"\n        line: \"{{ item }}\"\n      with_items:\n        - net.ipv4.ip_forward = 1\n        - fs.file-max = 262144\n        - vm.max_map_count = 262144\n        - net.ipv6.conf.all.disable_ipv6 = 1\n        - net.ipv6.conf.default.disable_ipv6 = 1\n        - net.ipv6.conf.lo.disable_ipv6 = 1\n\n    - name: \u8c03\u6574\u7cfb\u7edf\u53c2\u6570\n      ansible.builtin.lineinfile:\n        path: \"/etc/security/limits.conf\"\n        line: \"{{ item }}\"\n      with_items:\n        - \"* soft nofile 262144\"\n        - \"* hard nofile 262144\"\n        - \"root soft nofile 262144\"\n        - \"root hard nofile 262144\"\n\n    - name: \u5b89\u88c5\u7cfb\u7edf\u66f4\u65b0\n      ansible.builtin.apt:\n        upgrade: full\n        update_cache: true\n\n    - name: \u5b89\u88c5\u7cfb\u7edf\u57fa\u7840\u7684\u5e94\u7528\u5de5\u5177\n      ansible.builtin.apt:\n        name: \"{{ item }}\"\n        state: present\n      with_items: \"{{ basic_tools }}\"\n\n    - name: \u505c\u7528 systemd-resolved\n      ansible.builtin.systemd_service:\n        name: systemd-resolved\n        state: stopped\n        enabled: false\n\n    - name: \u5220\u9664\u65e7\u7684 resolv.conf\n      ansible.builtin.file:\n        path: /etc/resolv.conf\n        state: absent\n\n    - name: \u6dfb\u52a0\u65b0\u7684 resolv.conf\n      ansible.builtin.copy:\n        content: |\n          # Automatically generated by Ansible\n          nameserver 114.114.114.114\n        dest: /etc/resolv.conf\n        mode: \"0644\"\n\n    - name: \u5378\u8f7d snap step 1\n      community.general.snap:\n        name: \"{{ item }}\"\n        state: absent\n      loop:\n        - lxd\n        - core20\n        - snapd\n    - name: \u5378\u8f7d snap step 2\n      ansible.builtin.systemd_service:\n        name: snapd\n        state: stopped\n    - name: \u5378\u8f7d snap step 3\n      ansible.builtin.apt:\n        name: snapd\n        state: absent\n    - name: \u5378\u8f7d snap step 4\n      ansible.builtin.file:\n        path: /root/snap\n        state: absent\n\n    - name: \u9759\u6001\u8def\u7531 | 1\n      ansible.builtin.copy:\n        content: |\n          [Unit]\n          # /lib/systemd/system/lan_static.service\n          Description = Apply static route rules\n          After = ssh.service\n\n          [Service]\n          Type=oneshot\n          ExecStart=/bin/sh -c 'bash -x /root/route_add.sh'\n          RemainAfterExit=yes\n\n          [Install]\n          WantedBy=default.target\n        dest: /lib/systemd/system/lan_static.service\n        mode: \"0644\"\n    - name: \u9759\u6001\u8def\u7531 | 2\n      ansible.builtin.systemd:\n        name: lan_static.service\n        enabled: true\n    - name: \u9759\u6001\u8def\u7531 | 3\n      ansible.builtin.copy:\n        content: |\n          #!/bin/bash\n          set -x\n          lan_ip='192.168.0.0/16'\n          switch=192.168.99.254\n          ip route add $lan_ip via $switch\n        dest: /root/route_add.sh\n        mode: \"0755\"\n</code></pre>"},{"location":"pyenv/","title":"Pyenv","text":""},{"location":"pyenv/#python","title":"python","text":"<pre><code># \u5b89\u88c5\u4f9d\u8d56\u5e93\nsudo apt install -y build-essential zlib1g-dev libffi-dev libssl-dev libbz2-dev libreadline-dev libsqlite3-dev liblzma-dev\n\n# \u5b89\u88c5 pyenv\ngit clone https://github.com/pyenv/pyenv.git ~/.pyenv\ncd ~/.pyenv &amp;&amp; src/configure &amp;&amp; make -C src\n\n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\necho 'export PYENV_ROOT=\"$HOME/.pyenv\"' &gt;&gt; ~/.bashrc\necho 'command -v pyenv &gt;/dev/null || export PATH=\"$PYENV_ROOT/bin:$PATH\"' &gt;&gt; ~/.bashrc\necho 'eval \"$(pyenv init -)\"' &gt;&gt; ~/.bashrc\n\n# \u901a\u8fc7\u4e2d\u56fd\u955c\u50cf\u5b89\u88c5\u6307\u5b9a\u7248\u672c\nexport v=3.10.12\nwget https://npm.taobao.org/mirrors/python/$v/Python-$v.tar.xz -P ~/.pyenv/cache/\npyenv install $v\npyenv global  $v\n\n# \u8bbe\u7f6e pip \u4e2d\u56fd\u955c\u50cf\nmkdir -p ~/.pip\ncat &lt;&lt;EOF&gt; ~/.pip/pip.conf\n[global]\nindex-url = https://pypi.tuna.tsinghua.edu.cn/simple\n[install]\ntrusted-host = pypi.tuna.tsinghua.edu.cn\nEOF\n\n# \u66f4\u65b0\u5305\u7ba1\u7406\u5668\npip install --upgrade pip\npip install --upgrade setuptools\n</code></pre>"},{"location":"pyenv/#ruby","title":"ruby","text":"<pre><code>git clone https://github.com/rbenv/rbenv.git $HOME/.zen/opt/rbenv\n\n# ruby\nexport RBENV_ROOT=\"$HOME/.zen/opt/rbenv\"\nexport PATH=${RBENV_ROOT}/bin:$PATH\neval \"$(rbenv init -)\"\n\nmkdir -p \"$(rbenv root)\"/plugins\ngit clone https://github.com/rbenv/ruby-build.git \"$(rbenv root)\"/plugins/ruby-build\ncurl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-doctor | bash\n\nrbenv install 2.6.6\nrbenv global 2.6.6\n</code></pre>"},{"location":"pyenv/#nodejs","title":"nodejs","text":"<pre><code>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash\n\nexport NVM_DIR=\"$HOME/.nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] &amp;&amp; \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n[ -s \"$NVM_DIR/bash_completion\" ] &amp;&amp; \\. \"$NVM_DIR/bash_completion\"  # This loads nvm bash_completion\n\nexport NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/dist\n\nnvm install 20\nnvm use 20\n\ncurl -fsSL https://get.pnpm.io/install.sh | sh -\ncurl -fsSL https://get.pnpm.io/install.sh | env PNPM_VERSION=8.10.2 sh -\n</code></pre>"},{"location":"sendemail/","title":"SendEmail","text":""},{"location":"sendemail/#_1","title":"\u5b89\u88c5","text":"<pre><code>apt-get install sendemail libio-socket-ssl-perl libnet-ssleay-perl\n</code></pre>"},{"location":"sendemail/#_2","title":"\u4f7f\u7528","text":"<pre><code>/usr/bin/sendEmail \\\n-s smtp.mailgun.org:587 \\\n-o tls=yes \\\n-xu postmaster@domain \\\n-xp password \\\n-f user@domain \\\n-t another.user@another.domain \\\n-u \"Test\" \\\n-m \"ok?\"\n</code></pre>"},{"location":"tailscale/","title":"Tailscale","text":""},{"location":"tailscale/#_1","title":"\u5b89\u88c5","text":"<p>\u624b\u52a8\u5b89\u88c5</p> <pre><code>sudo apt install -y curl gnupg2 ca-certificates lsb-release ubuntu-keyring\n\ncurl -fsSL https://pkgs.tailscale.com/stable/ubuntu/$(lsb_release -cs).noarmor.gpg \\\n  | sudo tee /etc/apt/trusted.gpg.d/tailscale.gpg &gt;/dev/null\n\nsudo add-apt-repository \"deb [arch=amd64] https://pkgs.tailscale.com/stable/ubuntu $(lsb_release -cs) main\"\n\n# \u53d1\u884c\u7248\u6587\u4ef6 \u4f8b\u5982 noble\n\nwget \"https://pkgs.tailscale.com/stable/ubuntu/dists/$(lsb_release -cs)/InRelease\"\n\n# all \u67b6\u6784\u7684\u7d22\u5f15\u6587\u4ef6\u94fe\u63a5\nwget \"https://pkgs.tailscale.com/stable/ubuntu/dists/$(lsb_release -cs)/main/binary-all/Packages\"\n# amd64 \u67b6\u6784\u7684\u7d22\u5f15\u6587\u4ef6\u94fe\u63a5\nwget \"https://pkgs.tailscale.com/stable/ubuntu/dists/$(lsb_release -cs)/main/binary-amd64/Packages\"\n\n# 1.90.4 \u7248\u672c tailscale \u6587\u4ef6\u76f4\u63a5\u94fe\u63a5\nwget https://pkgs.tailscale.com/stable/ubuntu/pool/tailscale_1.90.4_amd64.deb\n\n# 1.35.181 \u7248\u672c tailscale-archive-keyring \u6587\u4ef6\u76f4\u63a5\u94fe\u63a5\nwget https://pkgs.tailscale.com/stable/ubuntu/pool/tailscale-archive-keyring_1.35.181_all.deb\n\nsudo apt install ./*.deb\n</code></pre>"},{"location":"vscode/","title":"VS Code","text":""},{"location":"vscode/#_1","title":"\u5b89\u88c5","text":"<p>\u6d4f\u89c8\u5668\u4e0b\u8f7d\u5730\u5740 code.deb \u3002</p> <pre><code>sudo apt-get install wget gpg\nwget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor &gt; packages.microsoft.gpg\nsudo install -D -o root -g root -m 644 packages.microsoft.gpg /etc/apt/keyrings\nsudo sh -c 'echo \"deb [arch=amd64,arm64,armhf signed-by=/etc/apt/keyrings/packages.microsoft.gpg] https://packages.microsoft.com/repos/code stable main\" &gt; /etc/apt/sources.list.d/vscode.list'\nrm -f packages.microsoft.gpg\n\nsudo apt install apt-transport-https\nsudo apt update\nsudo apt install code # or code-insiders\n</code></pre>"},{"location":"vscode/#_2","title":"\u63d2\u4ef6","text":"<pre><code>extensions='\nesbenp.prettier-vscode\nfoxundermoon.shell-format\nhashicorp.terraform\nms-azuretools.vscode-docker\nMS-CEINTL.vscode-language-pack-zh-hans\nms-python.isort\nms-python.python\nms-python.vscode-pylance\nms-toolsai.jupyter\nms-toolsai.jupyter-keymap\nms-toolsai.jupyter-renderers\nms-toolsai.vscode-jupyter-cell-tags\nms-toolsai.vscode-jupyter-slideshow\nms-vscode-remote.remote-containers\nms-vscode-remote.remote-ssh\nms-vscode-remote.remote-ssh-edit\nms-vscode.remote-explorer\nredhat.ansible\nredhat.vscode-yaml\n'\n\nfor x in ${extensions}; do\n    code --install-extension $x\ndone\n</code></pre>"},{"location":"vscode/#settings-snippets","title":"settings \u548c snippets","text":"<pre><code>settings.json -&gt; /home/zen/.zen/etc/vscode/settings.json\nsnippets -&gt; /home/zen/.zen/etc/vscode/snippets\n</code></pre>"},{"location":"windows/","title":"Windwos","text":""},{"location":"windows/#_1","title":"\u5feb\u901f\u6dfb\u52a0\u53ef\u4ee5\u8fdc\u7a0b\u7684\u7528\u6237","text":"<pre><code>net user /add user01 Hello2020\n\nnet localgroup \"Remote Desktop users\" /add user01\n</code></pre>"},{"location":"windows/#server-2019","title":"\u6fc0\u6d3b server 2019","text":"<pre><code>DISM /Online /Set-Edition:ServerStandard /ProductKey:N69G4-B89J2-4G8F4-WWYCC-J464C /AcceptEula\n\nslmgr.vbs /ipk N69G4-B89J2-4G8F4-WWYCC-J464C\n\nslmgr.vbs /skms 192.168.1.1\n\nslmgr.vbs /ato\n</code></pre>"},{"location":"windows/#offfice-2016-kms","title":"Offfice 2016 KMS \u6fc0\u6d3b\u6b65\u9aa4","text":"<p>ed2k://|file|SW_DVD5_Office_Professional_Plus_2016_64Bit_ChnSimp_MLF_X20-42426.ISO|1123452928|31087A00FF67D4F5B4CBF4AA07C3433B|/</p> <pre><code>cd /D \"C:\\Program Files\\Microsoft Office\\Office16\"\n\ncscript ospp.vbs /sethst:192.168.1.1\ncscript ospp.vbs /inpkey:XQNVK-8JYDB-WJ9W3-YJ8YR-WFG99\n\ncscript ospp.vbs /act\ncscript ospp.vbs /dstatus\n\ncscript ospp.vbs /unpkey:BTDRB\n</code></pre>"},{"location":"windows/#windwos-1011","title":"\u5220\u9664 windwos 10/11 \u7684\u5e93","text":"<pre><code>Windows Registry Editor Version 5.00\n\n[-HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace\\{088e3905-0323-4b02-9826-5d99428e115f}]\n[-HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace\\{0DB7E03F-FC29-4DC6-9020-FF41B59E513A}]\n[-HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace\\{1CF1260C-4DD0-4ebb-811F-33C572699FDE}]\n[-HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace\\{24ad3ad4-a569-4530-98e1-ab02f9417aa8}]\n[-HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace\\{374DE290-123F-4565-9164-39C4925E467B}]\n[-HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace\\{3ADD1653-EB32-4cb0-BBD7-DFA0ABB5ACCA}]\n[-HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace\\{3dfdf296-dbec-4fb4-81d1-6a3438bcf4de}]\n[-HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace\\{A0953C92-50DC-43bf-BE83-3742FED03C9C}]\n[-HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace\\{A8CDFF1C-4878-43be-B5FD-F8091C1C60D0}]\n[-HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace\\{B4BFCC3A-DB2C-424C-B029-7FE99A87C641}]\n[-HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace\\{d3162b92-9365-467a-956b-92703aca08af}]\n[-HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace\\{f86fa3ab-70d2-4fc7-9c99-fcbf05467f3a}]\n</code></pre>"},{"location":"windows/#_2","title":"\u5728\u6b64\u5904\u6253\u5f00\u547d\u4ee4\u7a97\u53e3","text":"<pre><code>Windows Registry Editor Version 5.00\n\n[HKEY_CLASSES_ROOT\\Directory\\background\\shell\\OpenCMDHere]\n@=\"\u5728\u6b64\u5904\u6253\u5f00\u547d\u4ee4\u7a97\u53e3\"\n\"Icon\"=\"cmd.exe\"\n\"ShowBasedOnVelocityId\"=dword:00639bc8\n\n[HKEY_CLASSES_ROOT\\Directory\\background\\shell\\OpenCMDHere\\command]\n@=\"cmd.exe /s /k pushd \\\"%V\\\"\"\n</code></pre>"},{"location":"windows/#_3","title":"\u5220\u9664\u987d\u56fa\u6587\u4ef6","text":"<pre><code>DEL /F /A /Q \\\\?\\%1\nRD /S /Q \\\\?\\%1\n</code></pre>"},{"location":"windows/#wps-office","title":"\u7981\u7528 WPS Office \u5f3a\u5236\u767b\u5f55\u529f\u80fd","text":"<pre><code>Windows Registry Editor Version 5.00\n\n[HKEY_CURRENT_USER\\Software\\kingsoft\\Office\\6.0\\plugins\\officespace\\flogin]\n\"enableForceLoginForFirstInstallDevice\"=\"false\"\n</code></pre>"}]}